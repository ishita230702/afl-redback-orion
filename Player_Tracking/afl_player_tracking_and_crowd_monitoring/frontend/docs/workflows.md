# Workflows

Login flow
- Page: client/pages/Login.tsx
- UI blocks: components/auth/* (HeaderBrand, FeatureCards, DemoAccessCard, AuthProviderButtons, LoginForm)
- Features: Google/Apple providers, email/password fields, Remember Me, password toggle, Demo Access
- On success: sets localStorage (isAuthenticated, userEmail) → navigate to dashboard

Dashboard navigation
- Tabs: Team, Performance, Crowd, Reports, Video
- Common helpers: client/lib/format.ts, client/lib/download.ts

Upload → Queue → Analysis → Export (end-to-end)

Diagram

User
  │
  │ Select file (VideoUploadPanel → useVideoAnalysis.handleVideoFileSelect)
  ▼
Validator
  │ checks type/size
  ▼
Queue Controller (useVideoAnalysis)
  │ create QueueItem { status: uploading, isUIControlled: true }
  │ update progress 0→100
  ▼
Analysis Phase
  │ status: analyzing, progress increases
  ▼
Completion
  │ status: completed, completedTime set
  ▼
Exports (handleDownloadReport)
  ├─ TXT: convertBackendDataToText → download
  ├─ JSON: stringify → download
  └─ PDF: convertBackendDataToHTML → generateDashboardPDF → print

Step-by-step
1) Select video (useVideoAnalysis.handleVideoFileSelect)
   - Validates type/size
2) Start analysis (useVideoAnalysis.uploadAndAnalyzeVideo)
   - Adds QueueItem; simulates upload then analysis
   - Persists a lightweight summary in localStorage
3) Queue updates (AFLDashboard useEffect)
   - Background simulator updates non-UI-controlled items (status/stage/progress)
   - Retry/remove supported via useProcessingQueue
4) View/Export
   - View item modal from queue list
   - Export via useVideoAnalysis.handleDownloadReport('pdf'|'json'|'txt')
   - TXT/HTML generated by client/lib/report.ts, PDF opens print window

Reports
- convertBackendDataToText/HTML shape a consistent report from the same JSON structure
- generateDashboardPDF renders a styled, printable page

Crowd & team data
- client/data/mock.ts supplies crowd zones, match stats, and timelines
- Use generateTimelineFromStadiumData to render time-series from current zones
